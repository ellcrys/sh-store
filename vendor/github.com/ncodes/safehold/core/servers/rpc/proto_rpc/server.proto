syntax = "proto3";
package proto_rpc;
import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "google/api/annotations.proto";

service API {
    rpc CreateIdentity(CreateIdentityMsg) returns (ObjectResponse);
    rpc CreateObjects(CreateObjectsMsg) returns (MultiObjectResponse);
}

// CreateObjects represents a collection of objects to be created
message CreateObjectsMsg {
    repeated Object objects = 1     [(gogoproto.jsontag) = "objects,omitempty", (gogoproto.moretags) = 'structs:"objects,omitempty" mapstructure:"objects,omitempty"'];
}

// CreateIdentityMsg represents an identity of a person or organization
message CreateIdentityMsg {
    string email = 1            [(gogoproto.jsontag) = "email,omitempty", (gogoproto.moretags) = 'structs:"email,omitempty" mapstructure:"email,omitempty"'];
    string password = 2         [(gogoproto.jsontag) = "password,omitempty", (gogoproto.moretags) = 'structs:"password,omitempty" mapstructure:"password,omitempty"'];
    bool developer = 3          [(gogoproto.jsontag) = "developer,omitempty", (gogoproto.moretags) = 'structs:"developer,omitempty" mapstructure:"developer,omitempty"'];
}

// ObjectResponse defines a response about a single object
message ObjectResponse {
    ObjectResponseData data  = 1                      [(gogoproto.jsontag) = "data,omitempty", (gogoproto.moretags) = 'structs:"data,omitempty" mapstructure:"data,omitempty"'];
    map<string,string> links = 2                      [(gogoproto.jsontag) = "links,omitempty", (gogoproto.moretags) = 'structs:"links,omitempty" mapstructure:"links,omitempty"'];
}

// MultiObjectResponse describes a response of multiple objects
message MultiObjectResponse {
    repeated ObjectResponseData data = 1             [(gogoproto.jsontag) = "data,omitempty", (gogoproto.moretags) = 'structs:"data,omitempty" mapstructure:"data,omitempty"'];
    map<string,string> links = 2                     [(gogoproto.jsontag) = "links,omitempty", (gogoproto.moretags) = 'structs:"links,omitempty" mapstructure:"links,omitempty"'];
}

// ObjectResponse describes an object and related information
message ObjectResponseData {
    string type = 1                            [(gogoproto.jsontag) = "type,omitempty", (gogoproto.moretags) = 'structs:"type,omitempty" mapstructure:"type,omitempty"'];
    string ID = 2                              [(gogoproto.jsontag) = "id,omitempty", (gogoproto.moretags) = 'structs:"id,omitempty" mapstructure:"id,omitempty"'];
    Object attributes = 3                      [(gogoproto.jsontag) = "attributes,omitempty", (gogoproto.moretags) = 'structs:"attributes,omitempty" mapstructure:"attributes,omitempty"'];
}

// Object describes an object
message Object {
    string ID = 1              [(gogoproto.jsontag) = "id,omitempty", (gogoproto.moretags) = 'structs:"id,omitempty" mapstructure:"id,omitempty"'];
    string ownerID = 2         [(gogoproto.jsontag) = "owner_id,omitempty", (gogoproto.moretags) = 'structs:"ownerId,omitempty" mapstructure:"ownerId,omitempty"'];
    string creatorID = 3       [(gogoproto.jsontag) = "creator_id,omitempty", (gogoproto.moretags) = 'structs:"creatorId,omitempty" mapstructure:"creatorId,omitempty"'];
    string partitionID = 4     [(gogoproto.jsontag) = "partition_id,omitempty", (gogoproto.moretags) = 'structs:"partitionId,omitempty" mapstructure:"partitionId,omitempty"'];
    string key = 5             [(gogoproto.jsontag) = "key,omitempty", (gogoproto.moretags) = 'structs:"key,omitempty" mapstructure:"key,omitempty"'];
    string value = 6           [(gogoproto.jsontag) = "value,omitempty", (gogoproto.moretags) = 'structs:"value,omitempty" mapstructure:"value,omitempty"'];
    bool protected = 7         [(gogoproto.jsontag) = "protected,omitempty", (gogoproto.moretags) = 'structs:"protected,omitempty" mapstructure:"protected,omitempty"'];
    bool refOnly = 8           [(gogoproto.jsontag) = "ref_only,omitempty", (gogoproto.moretags) = 'structs:"refOnly,omitempty" mapstructure:"refOnly,omitempty"'];
    int64 timestamp = 9        [(gogoproto.jsontag) = "timestamp,omitempty", (gogoproto.moretags) = 'structs:"timestamp,omitempty" mapstructure:"timestamp,omitempty"'];
    string prevHash = 10       [(gogoproto.jsontag) = "prev_hash,omitempty", (gogoproto.moretags) = 'structs:"prevHash,omitempty" mapstructure:"prevHash,omitempty"'];
    string hash = 11           [(gogoproto.jsontag) = "hash,omitempty", (gogoproto.moretags) = 'structs:"hash,omitempty" mapstructure:"hash,omitempty"'];
    Refs Refs = 12              [(gogoproto.jsontag) = "refs,omitempty", (gogoproto.moretags) = 'structs:"refs,omitempty" mapstructure:"refs,omitempty"'];
}

message Refs {
    string ref1 = 12           [(gogoproto.jsontag) = "ref1,omitempty", (gogoproto.moretags) = 'structs:"ref1,omitempty" mapstructure:"ref1,omitempty"'];
    string ref2 = 13           [(gogoproto.jsontag) = "ref2,omitempty", (gogoproto.moretags) = 'structs:"ref2,omitempty" mapstructure:"ref2,omitempty"'];
    string ref3 = 14           [(gogoproto.jsontag) = "ref3,omitempty", (gogoproto.moretags) = 'structs:"ref3,omitempty" mapstructure:"ref3,omitempty"'];
    string ref4 = 15           [(gogoproto.jsontag) = "ref4,omitempty", (gogoproto.moretags) = 'structs:"ref4,omitempty" mapstructure:"ref4,omitempty"'];
    string ref5 = 16           [(gogoproto.jsontag) = "ref5,omitempty", (gogoproto.moretags) = 'structs:"ref5,omitempty" mapstructure:"ref5,omitempty"'];
    string ref6 = 17           [(gogoproto.jsontag) = "ref6,omitempty", (gogoproto.moretags) = 'structs:"ref6,omitempty" mapstructure:"ref6,omitempty"'];
    string ref7 = 18           [(gogoproto.jsontag) = "ref7,omitempty", (gogoproto.moretags) = 'structs:"ref7,omitempty" mapstructure:"ref7,omitempty"'];
    string ref8 = 19           [(gogoproto.jsontag) = "ref8,omitempty", (gogoproto.moretags) = 'structs:"ref8,omitempty" mapstructure:"ref8,omitempty"'];
    string ref9 = 20           [(gogoproto.jsontag) = "ref9,omitempty", (gogoproto.moretags) = 'structs:"ref9,omitempty" mapstructure:"ref9,omitempty"'];
    string ref10 = 21          [(gogoproto.jsontag) = "ref10,omitempty", (gogoproto.moretags) = 'structs:"ref10,omitempty" mapstructure:"ref10,omitempty"'];
}
